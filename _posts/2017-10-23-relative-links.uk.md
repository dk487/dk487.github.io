---
title: Відносні посилання
date: 2017-10-23 15:34:19 +0300
lang: uk
translation_of: _posts/2017-10-23-relative-links.ru.md
---

Є одна тема у Jekyll'і, що бісить мене. І ця тема — посилання.

Я глибоко впевнений, щщ _справжній_ статичний сайт має використовувати
відносні посилання, причому не у тому сенсі, який розробники
Jekyll'а використовують у фільтрі `relative_url`.

Традиційний простий приклад.

```html
<link rel="stylesheet" href="...">
```

Як має виглядати посилання на деякий CSS?

| Вихідна сторінка          | `relative_url`    | Правильне посилання   |
|---------------------------|-------------------|-----------------------|
| /about.html               | /css/main.css     | css/main.css          |
| /contact/main-office.html | /css/main.css     | ../css/main.css       |
| /2017/10/23/example.html  | /css/main.css     | ../../../css/main.css |

Головний use case для таких посилань — це «сайт на флешці», можливість
відкрити сайт у браузері без веб-сервера, просто з локальних файлів.

Чорт забирай, та це ж одна з головних фішок статичної збірки!

Також це дає можливість хостити сайт у будь-якому підкаталозі будь-якого
іншого сайту _без перебудови_ з новим значенням `baseurl`. Комусь це
може здатися неважливим, та тільки не мені. Я хочу, щоб мій сайт
можна було без проблем відкрити по якійсь дивній адресі на кталт
`http://127.0.0.1/dk487.github.io/_site/` (цілком _неймовірна_
адреса, чи не так?)

Що можна зробити для отримання таких відносних посилань? Мабудь,
можна встановити якийсь плаґін. Це не мій варіант з багатьох причин,
хоча б тому, що використання плаґінів несумісне з Github Pages.

Але взагалі-то можна обійтись одними лише засобами Liquid'а.

{% raw %}
```liquid
{%      assign root_prefix = ''
%}{%    assign root_subfolders = page.url | split: '/' | size | minus: 2
%}{%    for x in (1..root_subfolders)
%}{%        assign root_prefix = root_prefix | append: '../'
%}{%    endfor
%}<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="{{ root_prefix }}css/main.css">
```
{% endraw %}

Виглядає кострубато, але працює.

Змінна {% raw %}`{{ root_prefix }}`{% endraw %} може знадобитися
у шаблонах, яким треба будувати правильні відносні посилання на стилі,
срипти та інші сторінки.

Контент краще відразу писати з відносними посиланнями:

```markdown
Перейти на [головну сторінку](../../../index.uk.html).
```

Я сподіваюся, що ці хаки [одного дня перестануть буди потрібними][1].
Але зараз вони добре допомагають.

[1]: https://github.com/jekyll/jekyll/issues/6360
